/* 图表专用样式文件 */

/* Chart.js 全局样式覆盖 */
.chart-container canvas {
    max-height: 100% !important;
    width: 100% !important;
}

/* 图表悬浮提示框样式 */
.chartjs-tooltip {
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border-light) !important;
    border-radius: var(--radius-small) !important;
    box-shadow: var(--shadow-medium) !important;
    color: var(--text-primary) !important;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'SF Pro Display', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
    font-size: 13px !important;
    padding: var(--space-sm) var(--space-md) !important;
    pointer-events: none !important;
    transition: all var(--transition-fast) !important;
}

/* 图表图例样式 */
.chartjs-legend {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: var(--space-lg) !important;
    margin-top: var(--space-md) !important;
    font-size: 12px !important;
    color: var(--text-secondary) !important;
}

.chartjs-legend-item {
    display: flex !important;
    align-items: center !important;
    gap: var(--space-xs) !important;
    cursor: pointer !important;
    transition: opacity var(--transition-fast) !important;
}

.chartjs-legend-item:hover {
    opacity: 0.8 !important;
}

.chartjs-legend-color {
    width: 12px !important;
    height: 12px !important;
    border-radius: 2px !important;
    flex-shrink: 0 !important;
}

/* 自定义图表颜色方案 - 乔布斯风格 */
:root {
    --chart-primary: #007AFF;
    --chart-secondary: #30D158;
    --chart-tertiary: #FF9F0A;
    --chart-quaternary: #FF453A;
    --chart-quinary: #AF52DE;
    --chart-senary: #00C7BE;
    --chart-septenary: #FF6B6B;
    --chart-octonary: #4ECDC4;
    
    /* 渐变色 */
    --gradient-blue: linear-gradient(135deg, #007AFF, #5AC8FA);
    --gradient-green: linear-gradient(135deg, #30D158, #64D2FF);
    --gradient-orange: linear-gradient(135deg, #FF9F0A, #FFCC70);
    --gradient-red: linear-gradient(135deg, #FF453A, #FF6B6B);
    --gradient-purple: linear-gradient(135deg, #AF52DE, #DA70D6);
    
    /* 图表网格线 */
    --chart-grid: rgba(0, 0, 0, 0.05);
    --chart-grid-dark: rgba(255, 255, 255, 0.1);
    
    /* 图表文字颜色 */
    --chart-text: #86868B;
    --chart-text-dark: #98989D;
}

[data-theme="dark"] {
    --chart-grid: var(--chart-grid-dark);
    --chart-text: var(--chart-text-dark);
}

/* 趋势图特殊样式 */
.trend-chart-container {
    position: relative;
}

.trend-chart-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--gradient-blue);
    opacity: 0.03;
    border-radius: var(--radius-medium);
    pointer-events: none;
}

/* 环形图容器 */
.doughnut-chart-container {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.doughnut-chart-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    pointer-events: none;
}

.doughnut-chart-value {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1;
}

.doughnut-chart-label {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: var(--space-xs);
}

/* 柱状图特殊效果 */
.bar-chart-container {
    position: relative;
}

.bar-chart-container canvas {
    transition: filter var(--transition-fast);
}

.bar-chart-container:hover canvas {
    filter: brightness(1.05);
}

/* 雷达图样式 */
.radar-chart-container {
    position: relative;
    background: radial-gradient(circle, rgba(0, 122, 255, 0.02) 0%, transparent 70%);
    border-radius: 50%;
    padding: var(--space-md);
}

/* 图表加载动画 */
.chart-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-secondary);
    font-size: 14px;
}

.chart-loading::before {
    content: '';
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-light);
    border-top: 2px solid var(--primary-blue);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-right: var(--space-sm);
}

/* 图表进入动画 */
@keyframes chartFadeIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.chart-container.animate-in {
    animation: chartFadeIn 0.6s ease-out;
}

/* 图表悬浮效果 */
.chart-card:hover .chart-container {
    transform: scale(1.01);
    transition: transform var(--transition-normal);
}

/* 自定义图表样式函数 */
.chart-style-modern {
    --chart-border-width: 3;
    --chart-point-radius: 5;
    --chart-point-hover-radius: 8;
    --chart-tension: 0.4;
}

/* 图表响应式调整 */
@media (max-width: 768px) {
    .chart-container {
        height: 250px;
    }
    
    .charts-grid .chart-container {
        height: 220px;
    }
    
    .doughnut-chart-value {
        font-size: 20px;
    }
    
    .chartjs-legend {
        flex-wrap: wrap;
        gap: var(--space-md) !important;
    }
}

@media (max-width: 480px) {
    .chart-container {
        height: 200px;
    }
    
    .charts-grid .chart-container {
        height: 180px;
    }
    
    .doughnut-chart-value {
        font-size: 18px;
    }
    
    .chartjs-tooltip {
        font-size: 11px !important;
        padding: var(--space-xs) var(--space-sm) !important;
    }
}

/* 图表数据为空时的样式 */
.chart-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-secondary);
    text-align: center;
}

.chart-empty-icon {
    font-size: 48px;
    opacity: 0.3;
    margin-bottom: var(--space-md);
}

.chart-empty-text {
    font-size: 14px;
    font-weight: 500;
}

/* 图表错误状态样式 */
.chart-error-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: var(--space-lg);
    text-align: center;
    background: rgba(255, 69, 58, 0.05);
    border: 1px dashed rgba(255, 69, 58, 0.2);
    border-radius: var(--radius-medium);
}

.chart-error-state .error-icon {
    font-size: 48px;
    margin-bottom: var(--space-md);
    opacity: 0.8;
}

.chart-error-state .error-message {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-sm);
}

.chart-error-state .error-details {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
    max-width: 300px;
    line-height: 1.4;
}

.chart-error-state .retry-btn {
    background: #FF453A;
    color: white;
    border: none;
    padding: var(--space-sm) var(--space-lg);
    border-radius: var(--radius-small);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.chart-error-state .retry-btn:hover {
    background: #D70015;
    transform: translateY(-1px);
}

/* 图表工具提示自定义样式 */
.custom-tooltip {
    background: var(--bg-secondary);
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-small);
    padding: var(--space-sm);
    box-shadow: var(--shadow-medium);
    font-size: 12px;
    color: var(--text-primary);
}

.custom-tooltip .tooltip-title {
    font-weight: 600;
    margin-bottom: var(--space-xs);
    color: var(--text-primary);
}

.custom-tooltip .tooltip-body {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
}

.custom-tooltip .tooltip-color {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.custom-tooltip .tooltip-value {
    font-weight: 600;
}

/* 图表动画关键帧 */
@keyframes slideInUp {
    from {
        transform: translateY(30px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideInLeft {
    from {
        transform: translateX(-30px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(30px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* 图表容器动画延迟 */
.charts-grid .chart-card:nth-child(1) .chart-container {
    animation: slideInLeft 0.6s ease-out 0.1s both;
}

.charts-grid .chart-card:nth-child(2) .chart-container {
    animation: slideInUp 0.6s ease-out 0.2s both;
}

.charts-grid .chart-card:nth-child(3) .chart-container {
    animation: slideInUp 0.6s ease-out 0.3s both;
}

.charts-grid .chart-card:nth-child(4) .chart-container {
    animation: slideInRight 0.6s ease-out 0.4s both;
}