<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>招聘项目管理系统 - 数据归集中心</title>

    <!-- 静态资源 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>

    <!-- 内联数据区 -->
    <script>
        const source_data = [
            { "分支简称": "分支1", "职位数": 267, "新增简历数": 123123, "简历推荐数": 1223, "面试中总数": 139, "入职数": 13, "招聘账号数": 332, "简历推荐率": 1.0, "面试转化率": 11.37, "入职转化率": 9.35 },
            { "分支简称": "分支2", "职位数": 25, "新增简历数": 244, "简历推荐数": 244, "面试中总数": 24, "入职数": 6, "招聘账号数": 2225, "简历推荐率": 100.0, "面试转化率": 9.84, "入职转化率": 25.0 },
            { "分支简称": "分支3", "职位数": 12, "新增简历数": 46, "简历推荐数": 30, "面试中总数": 5, "入职数": 1, "招聘账号数": 444, "简历推荐率": 65.22, "面试转化率": 16.67, "入职转化率": 20.0 },
            { "分支简称": "分支4", "职位数": 25, "新增简历数": 278, "简历推荐数": 160, "面试中总数": 70, "入职数": 16, "招聘账号数": 5, "简历推荐率": 57.55, "面试转化率": 43.75, "入职转化率": 22.86 },
            { "分支简称": "分支5", "职位数": 7, "新增简历数": 4, "简历推荐数": 4, "面试中总数": 4, "入职数": 4, "招聘账号数": 25, "简历推荐率": 100.0, "面试转化率": 100.0, "入职转化率": 100.0 },
            { "分支简称": "分支6", "职位数": 21, "新增简历数": 123123, "简历推荐数": 12311, "面试中总数": 1231, "入职数": 245, "招聘账号数": 5552, "简历推荐率": 10.0, "面试转化率": 10.0, "入职转化率": 19.9 },
            { "分支简称": "分支7", "职位数": 26, "新增简历数": 25, "简历推荐数": 1223, "面试中总数": 139, "入职数": 13, "招聘账号数": 25, "简历推荐率": 4892.0, "面试转化率": 11.37, "入职转化率": 9.35 },
            { "分支简称": "分支8", "职位数": 9, "新增简历数": 2525, "简历推荐数": 254, "面试中总数": 24, "入职数": 6, "招聘账号数": 25, "简历推荐率": 10.06, "面试转化率": 9.45, "入职转化率": 25.0 },
            { "分支简称": "分支9", "职位数": 555, "新增简历数": 402, "简历推荐数": 30, "面试中总数": 5, "入职数": 1, "招聘账号数": 252, "简历推荐率": 7.46, "面试转化率": 16.67, "入职转化率": 20.0 },
            { "分支简称": "分支10", "职位数": 38, "新增简历数": 629, "简历推荐数": 160, "面试中总数": 70, "入职数": 16, "招聘账号数": 7, "简历推荐率": 25.44, "面试转化率": 43.75, "入职转化率": 22.86 }
        ];

        const branch_data = [
            { "分支简称": "分支1", "职位数": 267, "新增简历数": 123123, "简历推荐数": 1223, "面试中总数": 139, "入职数": 13, "招聘账号数": 332, "简历推荐率": 1.0, "面试转化率": 11.37, "入职转化率": 9.35, "进行中项目": 15, "已完成项目": 9, "暂停项目": 0, "项目完成率": 37.5 },
            { "分支简称": "分支2", "职位数": 25, "新增简历数": 244, "简历推荐数": 244, "面试中总数": 24, "入职数": 6, "招聘账号数": 2225, "简历推荐率": 100.0, "面试转化率": 9.84, "入职转化率": 25.0, "进行中项目": 10, "已完成项目": 8, "暂停项目": 0, "项目完成率": 44.4 },
            { "分支简称": "分支3", "职位数": 12, "新增简历数": 46, "简历推荐数": 30, "面试中总数": 5, "入职数": 1, "招聘账号数": 444, "简历推荐率": 65.22, "面试转化率": 16.67, "入职转化率": 20.0, "进行中项目": 8, "已完成项目": 7, "暂停项目": 0, "项目完成率": 46.7 },
            { "分支简称": "分支4", "职位数": 25, "新增简历数": 278, "简历推荐数": 160, "面试中总数": 70, "入职数": 16, "招聘账号数": 5, "简历推荐率": 57.55, "面试转化率": 43.75, "入职转化率": 22.86, "进行中项目": 12, "已完成项目": 9, "暂停项目": 0, "项目完成率": 42.9 },
            { "分支简称": "分支5", "职位数": 7, "新增简历数": 4, "简历推荐数": 4, "面试中总数": 4, "入职数": 4, "招聘账号数": 25, "简历推荐率": 100.0, "面试转化率": 100.0, "入职转化率": 100.0, "进行中项目": 7, "已完成项目": 5, "暂停项目": 0, "项目完成率": 41.7 },
            { "分支简称": "分支6", "职位数": 21, "新增简历数": 123123, "简历推荐数": 12311, "面试中总数": 1231, "入职数": 245, "招聘账号数": 5552, "简历推荐率": 10.0, "面试转化率": 10.0, "入职转化率": 19.9, "进行中项目": 6, "已完成项目": 4, "暂停项目": 2, "项目完成率": 33.3 },
            { "分支简称": "分支7", "职位数": 26, "新增简历数": 25, "简历推荐数": 1223, "面试中总数": 139, "入职数": 13, "招聘账号数": 25, "简历推荐率": 4892.0, "面试转化率": 11.37, "入职转化率": 9.35, "进行中项目": 5, "已完成项目": 3, "暂停项目": 1, "项目完成率": 33.3 },
            { "分支简称": "分支8", "职位数": 9, "新增简历数": 2525, "简历推荐数": 254, "面试中总数": 24, "入职数": 6, "招聘账号数": 25, "简历推荐率": 10.06, "面试转化率": 9.45, "入职转化率": 25.0, "进行中项目": 4, "已完成项目": 3, "暂停项目": 0, "项目完成率": 42.9 },
            { "分支简称": "分支9", "职位数": 555, "新增简历数": 402, "简历推荐数": 30, "面试中总数": 5, "入职数": 1, "招聘账号数": 252, "简历推荐率": 7.46, "面试转化率": 16.67, "入职转化率": 20.0, "进行中项目": 3, "已完成项目": 2, "暂停项目": 0, "项目完成率": 40.0 },
            { "分支简称": "分支10", "职位数": 38, "新增简历数": 629, "简历推荐数": 160, "面试中总数": 70, "入职数": 16, "招聘账号数": 7, "简历推荐率": 25.44, "面试转化率": 43.75, "入职转化率": 22.86, "进行中项目": 4, "已完成项目": 3, "暂停项目": 0, "项目完成率": 42.9 },
            { "分支简称": "分支11", "职位数": 21, "新增简历数": 21, "简历推荐数": 21, "面试中总数": 21, "入职数": 21, "招聘账号数": 21, "简历推荐率": 100.0, "面试转化率": 100.0, "入职转化率": 100.0, "进行中项目": 8, "已完成项目": 11, "暂停项目": 0, "项目完成率": 57.9 },
            { "分支简称": "分支12", "职位数": 33, "新增简历数": 333, "简历推荐数": 33, "面试中总数": 3, "入职数": 3, "招聘账号数": 33, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 12, "已完成项目": 15, "暂停项目": 1, "项目完成率": 53.6 },
            { "分支简称": "分支13", "职位数": 44, "新增简历数": 444, "简历推荐数": 44, "面试中总数": 4, "入职数": 4, "招聘账号数": 44, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 14, "已完成项目": 18, "暂停项目": 0, "项目完成率": 56.3 },
            { "分支简称": "分支14", "职位数": 55, "新增简历数": 555, "简历推荐数": 55, "面试中总数": 5, "入职数": 5, "招聘账号数": 55, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 16, "已完成项目": 20, "暂停项目": 2, "项目完成率": 52.6 },
            { "分支简称": "分支15", "职位数": 66, "新增简历数": 666, "简历推荐数": 66, "面试中总数": 6, "入职数": 6, "招聘账号数": 66, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 18, "已完成项目": 22, "暂停项目": 1, "项目完成率": 53.7 },
            { "分支简称": "分支16", "职位数": 77, "新增简历数": 777, "简历推荐数": 77, "面试中总数": 7, "入职数": 7, "招聘账号数": 77, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 20, "已完成项目": 25, "暂停项目": 0, "项目完成率": 55.6 },
            { "分支简称": "分支17", "职位数": 88, "新增简历数": 888, "简历推荐数": 88, "面试中总数": 8, "入职数": 8, "招聘账号数": 88, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 22, "已完成项目": 28, "暂停项目": 2, "项目完成率": 53.8 },
            { "分支简称": "分支18", "职位数": 99, "新增简历数": 999, "简历推荐数": 99, "面试中总数": 9, "入职数": 9, "招聘账号数": 99, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 24, "已完成项目": 30, "暂停项目": 1, "项目完成率": 54.5 },
            { "分支简称": "分支19", "职位数": 101, "新增简历数": 1010, "简历推荐数": 101, "面试中总数": 10, "入职数": 10, "招聘账号数": 101, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 26, "已完成项目": 32, "暂停项目": 3, "项目完成率": 52.5 },
            { "分支简称": "分支20", "职位数": 111, "新增简历数": 1111, "简历推荐数": 111, "面试中总数": 11, "入职数": 11, "招聘账号数": 111, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 28, "已完成项目": 35, "暂停项目": 2, "项目完成率": 53.8 },
            { "分支简称": "分支21", "职位数": 121, "新增简历数": 1212, "简历推荐数": 121, "面试中总数": 12, "入职数": 12, "招聘账号数": 121, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 30, "已完成项目": 38, "暂停项目": 1, "项目完成率": 55.1 },
            { "分支简称": "分支22", "职位数": 131, "新增简历数": 1313, "简历推荐数": 131, "面试中总数": 13, "入职数": 13, "招聘账号数": 131, "简历推荐率": 9.91, "面试转化率": 9.09, "入职转化率": 100.0, "进行中项目": 32, "已完成项目": 40, "暂停项目": 4, "项目完成率": 52.6 }
        ];

        const monthly_data = [
            { "month": "2024-09", "新增职位数": 475, "新增简历数": 45324, "简历推荐数": 5366, "需求人数": 728, "入职数": 116 },
            { "month": "2024-10", "新增职位数": 455, "新增简历数": 33369, "简历推荐数": 5942, "需求人数": 769, "入职数": 154 },
            { "month": "2024-11", "新增职位数": 449, "新增简历数": 50688, "简历推荐数": 6181, "需求人数": 688, "入职数": 131 },
            { "month": "2024-12", "新增职位数": 510, "新增简历数": 41293, "简历推荐数": 5785, "需求人数": 795, "入职数": 144 },
            { "month": "2025-01", "新增职位数": 522, "新增简历数": 32863, "简历推荐数": 4502, "需求人数": 663, "入职数": 132 },
            { "month": "2025-02", "新增职位数": 588, "新增简历数": 35665, "简历推荐数": 5212, "需求人数": 766, "入职数": 116 },
            { "month": "2025-03", "新增职位数": 536, "新增简历数": 42187, "简历推荐数": 5890, "需求人数": 812, "入职数": 167 },
            { "month": "2025-04", "新增职位数": 592, "新增简历数": 38456, "简历推荐数": 6345, "需求人数": 876, "入职数": 189 },
            { "month": "2025-05", "新增职位数": 621, "新增简历数": 45678, "简历推荐数": 6890, "需求人数": 923, "入职数": 210 },
            { "month": "2025-06", "新增职位数": 645, "新增简历数": 49876, "简历推荐数": 7234, "需求人数": 987, "入职数": 225 },
            { "month": "2025-07", "新增职位数": 689, "新增简历数": 52134, "简历推荐数": 7654, "需求人数": 1034, "入职数": 243 },
            { "month": "2025-08", "新增职位数": 712, "新增简历数": 55678, "简历推荐数": 8123, "需求人数": 1098, "入职数": 265 }
        ];

        const dept_data = [
            { "部门": "技术研发", "职位数": 142, "占比": 2.1 },
            { "部门": "产品运营", "职位数": 1097, "占比": 16.4 },
            { "部门": "市场营销", "职位数": 167, "占比": 2.5 },
            { "部门": "人力资源", "职位数": 321, "占比": 4.8 },
            { "部门": "财务会计", "职位数": 462, "占比": 6.9 },
            { "部门": "客户服务", "职位数": 2290, "占比": 34.3 },
            { "部门": "销售业务", "职位数": 1281, "占比": 19.2 },
            { "部门": "管理岗位", "职位数": 910, "占比": 13.6 }
        ];

        const position_data = [
            { "职位": "iOS开发", "需求量": 1189, "热度指数": 17.8 },
            { "职位": "前端工程师", "需求量": 73, "热度指数": 1.1 },
            { "职位": "后端工程师", "需求量": 901, "热度指数": 13.5 },
            { "职位": "产品经理", "需求量": 295, "热度指数": 4.4 },
            { "职位": "UI设计师", "需求量": 293, "热度指数": 4.4 },
            { "职位": "数据分析师", "需求量": 620, "热度指数": 9.3 },
            { "职位": "销售代表", "需求量": 330, "热度指数": 5.0 },
            { "职位": "人力资源专员", "需求量": 347, "热度指数": 5.2 },
            { "职位": "客服代表", "需求量": 470, "热度指数": 7.1 },
            { "职位": "财务专员", "需求量": 817, "热度指数": 12.3 }
        ];

        const kpi_data = {
            total: { "新增职位数": 6674, "新增简历数": 512016, "简历推荐数": 65473, "需求人数": 9343, "入职数": 1802 },
            current_month: monthly_data[monthly_data.length - 1],
            last_month: monthly_data[monthly_data.length - 2],
            current_quarter: {
                "新增职位数": monthly_data.slice(-3).reduce((sum, m) => sum + m["新增职位数"], 0),
                "新增简历数": monthly_data.slice(-3).reduce((sum, m) => sum + m["新增简历数"], 0),
                "简历推荐数": monthly_data.slice(-3).reduce((sum, m) => sum + m["简历推荐数"], 0),
                "需求人数": monthly_data.slice(-3).reduce((sum, m) => sum + m["需求人数"], 0),
                "入职数": monthly_data.slice(-3).reduce((sum, m) => sum + m["入职数"], 0)
            }
        };
    </script>
</head>

<body class="bg-gray-50 min-h-screen">
    <!-- 顶部导航 -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <i class="fas fa-chart-line text-blue-600 text-2xl mr-3"></i>
                    <h1 class="text-xl font-semibold text-gray-900">招聘项目管理系统 - 数据归集中心</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <select id="kpi-period"
                            class="bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 appearance-none pr-8">
                            <option value="total">总计</option>
                            <option value="current_month">本月</option>
                            <option value="last_month">上月</option>
                            <option value="current_quarter">本季度</option>
                        </select>
                        <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-calendar-alt text-gray-500"></i>
                        <span class="text-sm text-gray-500" id="current-date"></span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- KPI卡片区域 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8">
            <div
                class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">新增项目数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="新增项目数">0</p>
                    </div>
                    <div class="bg-blue-100 p-3 rounded-lg">
                        <i class="fas fa-plus-circle text-blue-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 12.5%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div
                class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">成功项目数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="成功项目数">0</p>
                    </div>
                    <div class="bg-green-100 p-3 rounded-lg">
                        <i class="fas fa-check-circle text-green-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 8.3%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div
                class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">新增职位数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="新增职位数">0</p>
                    </div>
                    <div class="bg-purple-100 p-3 rounded-lg">
                        <i class="fas fa-briefcase text-purple-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 15.2%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div
                class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">简历推荐数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="简历推荐数">0</p>
                    </div>
                    <div class="bg-orange-100 p-3 rounded-lg">
                        <i class="fas fa-user-check text-orange-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-red-600 flex items-center">
                        <i class="fas fa-arrow-down mr-1"></i> 3.1%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div
                class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">需求人数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="需求人数">0</p>
                    </div>
                    <div class="bg-indigo-100 p-3 rounded-lg">
                        <i class="fas fa-comments text-indigo-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 9.7%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div
                class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">入职数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>

            </div><div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">赏金猎人数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">待发放赏金</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>


            <div
                class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">已发放赏金</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">赏金职位数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">成功悬赏职位</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">成功悬赏简历</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">赏金推广次数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">系统分支数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">分支账号数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">网站访问量</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">C端用户数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow duration-300">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">简历总数</p>
                        <p class="text-2xl font-bold text-gray-900 mt-1 kpi-value" data-kpi="入职数">0</p>
                    </div>
                    <div class="bg-teal-100 p-3 rounded-lg">
                        <i class="fas fa-user-plus text-teal-600"></i>
                    </div>
                </div>
                <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 flex items-center">
                        <i class="fas fa-arrow-up mr-1"></i> 18.4%
                    </span>
                    <span class="text-gray-500 ml-2">vs 上月</span>
                </div>
            </div>
        </div>

        <!-- 图表区域 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- 趋势分析 -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">月度招聘趋势</h2>
                    <div class="flex space-x-2">
                        <button id="trend-6m" class="text-sm px-3 py-1 bg-blue-600 text-white rounded-md">6个月</button>
                        <button id="trend-1y" class="text-sm px-3 py-1 bg-gray-200 text-gray-700 rounded-md">1年</button>
                    </div>
                </div>
                <div class="h-80">
                    <canvas id="trend-chart"></canvas>
                </div>
            </div>

            <!-- 需求洞察 -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">招聘需求分布</h2>
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-info-circle mr-1"></i> 按职位数统计
                    </div>
                </div>
                <div class="h-80">
                    <canvas id="dept-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- 分支数据区域 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- 分支招聘项目 -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">分支招聘项目</h2>
                    <div class="flex space-x-2">
                        <button id="project-progress" class="text-sm px-3 py-1 bg-blue-600 text-white rounded-md">项目进度</button>
                        <button id="project-metrics" class="text-sm px-3 py-1 bg-gray-200 text-gray-700 rounded-md">招聘指标</button>
                    </div>
                </div>
                <div class="h-80">
                    <canvas id="branch-chart"></canvas>
                </div>
                <!-- 切换模式时的指标选择器 -->
                <div id="metrics-selector" class="mt-4 hidden">
                    <div class="relative">
                        <select id="branch-metric"
                            class="bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 appearance-none pr-8">
                            <option value="职位数">职位数</option>
                            <option value="新增简历数">新增简历数</option>
                            <option value="简历推荐数">简历推荐数</option>
                            <option value="面试中总数">需求人数</option>
                            <option value="入职数">入职数</option>
                        </select>
                        <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <i class="fas fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 招聘效率 -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-lg font-semibold text-gray-900">招聘效率</h2>
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-chart-pie text-blue-500 mr-1"></i> 各分支完成率分布
                    </div>
                </div>
                <div class="h-80">
                    <canvas id="efficiency-chart"></canvas>
                </div>
                <!-- 效率统计 -->
                <div class="mt-6 border-t border-gray-100 pt-6">
                    <h4 class="text-sm font-medium mb-4">效率等级分布</h4>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-500">优秀 (≥60%)</span>
                                <span class="font-medium" id="excellent-count">0</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="excellent-bar" class="bg-green-500 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-500">良好 (50-60%)</span>
                                <span class="font-medium" id="good-count">0</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="good-bar" class="bg-blue-500 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-500">一般 (40-50%)</span>
                                <span class="font-medium" id="average-count">0</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="average-bar" class="bg-yellow-500 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-gray-500">待提升 (<40%)</span>
                                <span class="font-medium" id="poor-count">0</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="poor-bar" class="bg-red-500 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 职位热度图表 -->
        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 mb-8">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-lg font-semibold text-gray-900">热门职位需求</h2>
                <div class="text-sm text-gray-500">
                    <i class="fas fa-fire text-red-500 mr-1"></i> 热度指数
                </div>
            </div>
            <div class="h-80">
                <canvas id="position-chart"></canvas>
            </div>
        </div>

        <!-- 分支数据明细 -->
        <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 mb-8">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-lg font-semibold text-gray-900">分支数据明细</h2>
                <div class="relative">
                    <select id="rank-metric"
                        class="bg-gray-100 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 appearance-none pr-8">
                        <option value="职位数">项目排名</option>
                        <option value="新增简历数">成功项目排名</option>
                        <option value="简历推荐数">新增职位排名</option>
                        <option value="简历推荐数">简历推荐排名</option>
                        <option value="面试中总数">需求人数排名</option>
                        <option value="入职数">入职人数排名</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <i class="fas fa-chevron-down text-xs"></i>
                    </div>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                排名</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                分支</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                项目</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                成功项目</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                新增职位</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                简历推荐</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                需求人数</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                入职人数</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                项目成功率</th>
                        </tr>
                    </thead>
                    <tbody id="branch-table-body" class="bg-white divide-y divide-gray-200">
                        <!-- 表格内容将通过JavaScript动态生成 -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // 初始化页面
        document.addEventListener('DOMContentLoaded', function () {
            // 设置当前日期
            document.getElementById('current-date').textContent = new Date().toLocaleDateString('zh-CN');

            // 初始化KPI数据
            updateKPI('total');

            // 初始化图表
            initTrendChart(6);
            initDeptChart();
            initBranchChart('项目进度');
            initEfficiencyChart();
            initPositionChart();

            // 初始化表格
            updateBranchTable('职位数');

            // 事件监听
            document.getElementById('kpi-period').addEventListener('change', function (e) {
                updateKPI(e.target.value);
            });

            document.getElementById('trend-6m').addEventListener('click', function () {
                this.classList.remove('bg-gray-200', 'text-gray-700');
                this.classList.add('bg-blue-600', 'text-white');
                document.getElementById('trend-1y').classList.remove('bg-blue-600', 'text-white');
                document.getElementById('trend-1y').classList.add('bg-gray-200', 'text-gray-700');
                initTrendChart(6);
            });

            document.getElementById('trend-1y').addEventListener('click', function () {
                this.classList.remove('bg-gray-200', 'text-gray-700');
                this.classList.add('bg-blue-600', 'text-white');
                document.getElementById('trend-6m').classList.remove('bg-blue-600', 'text-white');
                document.getElementById('trend-6m').classList.add('bg-gray-200', 'text-gray-700');
                initTrendChart(12);
            });

            // 分支图表模式切换
            document.getElementById('project-progress').addEventListener('click', function () {
                this.classList.remove('bg-gray-200', 'text-gray-700');
                this.classList.add('bg-blue-600', 'text-white');
                document.getElementById('project-metrics').classList.remove('bg-blue-600', 'text-white');
                document.getElementById('project-metrics').classList.add('bg-gray-200', 'text-gray-700');
                document.getElementById('metrics-selector').classList.add('hidden');
                initBranchChart('项目进度');
            });

            document.getElementById('project-metrics').addEventListener('click', function () {
                this.classList.remove('bg-gray-200', 'text-gray-700');
                this.classList.add('bg-blue-600', 'text-white');
                document.getElementById('project-progress').classList.remove('bg-blue-600', 'text-white');
                document.getElementById('project-progress').classList.add('bg-gray-200', 'text-gray-700');
                document.getElementById('metrics-selector').classList.remove('hidden');
                const selectedMetric = document.getElementById('branch-metric').value;
                initBranchChart(selectedMetric);
            });

            document.getElementById('branch-metric').addEventListener('change', function (e) {
                initBranchChart(e.target.value);
            });

            document.getElementById('rank-metric').addEventListener('change', function (e) {
                updateBranchTable(e.target.value);
            });
        });

        // 更新KPI数据
        function updateKPI(period) {
            const kpiValues = kpi_data[period];

            // 特殊处理新增项目数和成功项目数（模拟数据）
            const projectData = {
                total: { '新增项目数': 128, '成功项目数': 96 },
                current_month: { '新增项目数': 15, '成功项目数': 12 },
                last_month: { '新增项目数': 13, '成功项目数': 10 },
                current_quarter: { '新增项目数': 42, '成功项目数': 35 }
            };

            // 更新所有KPI值
            document.querySelectorAll('.kpi-value').forEach(el => {
                const kpiName = el.getAttribute('data-kpi');
                if (kpiName === '新增项目数' || kpiName === '成功项目数') {
                    el.textContent = formatNumber(projectData[period][kpiName]);
                } else {
                    el.textContent = formatNumber(kpiValues[kpiName]);
                }
            });
        }

        // 初始化趋势图表
        function initTrendChart(months) {
            const ctx = document.getElementById('trend-chart').getContext('2d');
            const data = monthly_data.slice(-months);

            if (window.trendChart) {
                window.trendChart.destroy();
            }

            window.trendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.month.substring(5)),
                    datasets: [
                        {
                            label: '新增职位数',
                            data: data.map(d => d.新增职位数),
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: false
                        },
                        {
                            label: '简历推荐数',
                            data: data.map(d => d.简历推荐数),
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: false
                        },
                        {
                            label: '入职数',
                            data: data.map(d => d.入职数),
                            borderColor: 'rgb(245, 158, 11)',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // 初始化部门分布图表
        function initDeptChart() {
            const ctx = document.getElementById('dept-chart').getContext('2d');

            if (window.deptChart) {
                window.deptChart.destroy();
            }

            window.deptChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: dept_data.map(d => d.部门),
                    datasets: [{
                        data: dept_data.map(d => d.职位数),
                        backgroundColor: [
                            '#3B82F6', '#10B981', '#F59E0B', '#EF4444',
                            '#8B5CF6', '#06B6D4', '#84CC16', '#F97316'
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                boxWidth: 12,
                                padding: 15
                            }
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        // 初始化分支图表
        function initBranchChart(metric) {
            const ctx = document.getElementById('branch-chart').getContext('2d');
            const data = branch_data.slice(0, 10); // 只显示前10个分支

            if (window.branchChart) {
                window.branchChart.destroy();
            }

            if (metric === '项目进度') {
                // 堆叠柱状图模式
                window.branchChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.map(d => d.分支简称),
                        datasets: [
                            {
                                label: '进行中项目',
                                data: data.map(d => d.进行中项目),
                                backgroundColor: 'rgb(59, 130, 246)',
                                borderColor: 'rgb(59, 130, 246)',
                                borderWidth: 1
                            },
                            {
                                label: '已完成项目',
                                data: data.map(d => d.已完成项目),
                                backgroundColor: 'rgb(34, 197, 94)',
                                borderColor: 'rgb(34, 197, 94)',
                                borderWidth: 1
                            },
                            {
                                label: '暂停项目',
                                data: data.map(d => d.暂停项目),
                                backgroundColor: 'rgb(251, 191, 36)',
                                borderColor: 'rgb(251, 191, 36)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top'
                            }
                        },
                        scales: {
                            x: {
                                stacked: true,
                                grid: {
                                    display: false
                                }
                            },
                            y: {
                                stacked: true,
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.05)'
                                }
                            }
                        }
                    }
                });
            } else {
                // 普通柱状图模式
                window.branchChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: data.map(d => d.分支简称),
                        datasets: [{
                            label: metric,
                            data: data.map(d => d[metric]),
                            backgroundColor: 'rgba(59, 130, 246, 0.8)',
                            borderColor: 'rgb(59, 130, 246)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.05)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }
        }

        // 初始化招聘效率图表
        function initEfficiencyChart() {
            const ctx = document.getElementById('efficiency-chart').getContext('2d');
            
            // 根据项目完成率进行分类统计
            const efficiencyData = {
                excellent: 0,  // ≥60%
                good: 0,       // 50-60%
                average: 0,    // 40-50%
                poor: 0        // <40%
            };

            branch_data.forEach(branch => {
                const rate = branch.项目完成率;
                if (rate >= 60) efficiencyData.excellent++;
                else if (rate >= 50) efficiencyData.good++;
                else if (rate >= 40) efficiencyData.average++;
                else efficiencyData.poor++;
            });

            const total = branch_data.length;

            if (window.efficiencyChart) {
                window.efficiencyChart.destroy();
            }

            window.efficiencyChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['优秀 (≥60%)', '良好 (50-60%)', '一般 (40-50%)', '待提升 (<40%)'],
                    datasets: [{
                        data: [efficiencyData.excellent, efficiencyData.good, efficiencyData.average, efficiencyData.poor],
                        backgroundColor: [
                            'rgb(34, 197, 94)',   // 绿色
                            'rgb(59, 130, 246)',  // 蓝色  
                            'rgb(251, 191, 36)',  // 黄色
                            'rgb(239, 68, 68)'    // 红色
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                boxWidth: 12,
                                padding: 15
                            }
                        }
                    },
                    cutout: '60%'
                }
            });

            // 更新统计条
            document.getElementById('excellent-count').textContent = efficiencyData.excellent;
            document.getElementById('good-count').textContent = efficiencyData.good;
            document.getElementById('average-count').textContent = efficiencyData.average;
            document.getElementById('poor-count').textContent = efficiencyData.poor;

            document.getElementById('excellent-bar').style.width = `${(efficiencyData.excellent / total) * 100}%`;
            document.getElementById('good-bar').style.width = `${(efficiencyData.good / total) * 100}%`;
            document.getElementById('average-bar').style.width = `${(efficiencyData.average / total) * 100}%`;
            document.getElementById('poor-bar').style.width = `${(efficiencyData.poor / total) * 100}%`;
        }

        // 初始化职位热度图表
        function initPositionChart() {
            const ctx = document.getElementById('position-chart').getContext('2d');
            const data = position_data.sort((a, b) => b.热度指数 - a.热度指数);

            if (window.positionChart) {
                window.positionChart.destroy();
            }

            window.positionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.map(d => d.职位),
                    datasets: [{
                        label: '热度指数',
                        data: data.map(d => d.热度指数),
                        backgroundColor: data.map((d, i) => {
                            const alpha = 0.8 - (i * 0.05);
                            return `rgba(239, 68, 68, ${alpha})`;
                        }),
                        borderColor: 'rgb(239, 68, 68)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // 更新分支表格
        function updateBranchTable(metric) {
            const tbody = document.getElementById('branch-table-body');
            const sortedData = [...branch_data].sort((a, b) => b[metric] - a[metric]);

            tbody.innerHTML = '';

            sortedData.forEach((branch, index) => {
                const row = document.createElement('tr');
                row.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';

                // 排名样式
                let rankClass = 'bg-gray-100';
                if (index === 0) rankClass = 'bg-yellow-100 text-yellow-800';
                else if (index === 1) rankClass = 'bg-gray-200 text-gray-800';
                else if (index === 2) rankClass = 'bg-orange-100 text-orange-800';

                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center justify-center w-6 h-6 rounded-full ${rankClass} text-xs font-medium">
                            ${index + 1}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${branch.分支简称}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatNumber(branch.职位数)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatNumber(branch.新增简历数)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatNumber(branch.简历推荐数)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatNumber(branch.面试中总数)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatNumber(branch.入职数)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatNumber(branch.入职数)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${((branch.职位数 > 0) ? (branch.新增简历数 / branch.职位数 * 100).toFixed(1) : 0)}%</td>
                `;

                tbody.appendChild(row);
            });
        }

        // 数字格式化
        function formatNumber(num) {
            return new Intl.NumberFormat('zh-CN').format(num);
        }
    </script>

</body>

</html>